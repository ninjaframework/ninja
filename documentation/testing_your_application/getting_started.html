<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/documentation/testing_your_application/getting_started.md at 2023-12-07
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20231207" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Ninja &#x2013; Testing</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.7.min.js"></script>
<meta name="description"
                  content="Ninja is a full stack web framework for Java.
                    Rock solid, fast and super productive."/>
            <link rel="icon" type="image/png" href="favicon.png" />

            <link href='//fonts.googleapis.com/css?family=Titillium+Web' rel='stylesheet' type='text/css'/>
            <link href='//fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'/>
            <link href='//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'/>

            <script type="text/javascript">

                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-38154034-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();

            </script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/ninjaframework/ninja">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="../../.." id="bannerLeft" title="Ninja web framework"><img src="../../ninja_logo.png"  alt="Ninja web framework"/></a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2023-12-07</li>
          <li id="projectVersion" class="pull-right">Version: 7.0.1-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Introduction</li>
    <li><a href="../../introduction.html" title="The problem we solve"><span class="none"></span>The problem we solve</a></li>
    <li><a href="../../high_level_overview.html" title="Ninja - high level overview"><span class="none"></span>Ninja - high level overview</a></li>
    <li><a href="../../team.html" title="The team"><span class="none"></span>The team</a></li>
      <li class="nav-header">Commercial support</li>
    <li><a href="../../commercial_support/philosophy.html" title="Philosophy"><span class="none"></span>Philosophy</a></li>
    <li><a href="../../commercial_support/training.html" title="Training"><span class="none"></span>Training</a></li>
    <li><a href="../../commercial_support/support_plans.html" title="Support plans"><span class="none"></span>Support plans</a></li>
    <li><a href="../../commercial_support/agile_custom_development.html" title="Custom development"><span class="none"></span>Custom development</a></li>
      <li class="nav-header">Documentation</li>
    <li><a href="../../documentation/getting_started/installing_ninja.html" title="Getting Started"><span class="icon-chevron-right"></span>Getting Started</a></li>
    <li><a href="../../documentation/basic_concepts/basic_concepts.html" title="Basic concepts"><span class="icon-chevron-right"></span>Basic concepts</a></li>
    <li><a href="../../documentation/configuration_and_modes.html" title="Configuration and modes"><span class="none"></span>Configuration and modes</a></li>
    <li><a href="../../documentation/html_templating/getting_started.html" title="HTML templating"><span class="icon-chevron-right"></span>HTML templating</a></li>
    <li><a href="../../documentation/working_with_json_jsonp.html" title="Working with JSON / JSONP"><span class="none"></span>Working with JSON / JSONP</a></li>
    <li><a href="../../documentation/working_with_xml.html" title="Working with XML"><span class="none"></span>Working with XML</a></li>
      <li class="nav-header">Advanced topics</li>
    <li><a href="../../documentation/websockets.html" title="Web Sockets"><span class="none"></span>Web Sockets</a></li>
    <li><a href="../../documentation/validation.html" title="Validation"><span class="none"></span>Validation</a></li>
    <li><a href="../../documentation/content_negotiation.html" title="Content negotiation"><span class="none"></span>Content negotiation</a></li>
    <li><a href="../../documentation/uploading_files.html" title="Uploading files"><span class="none"></span>Uploading files</a></li>
    <li><a href="../../documentation/scheduler.html" title="Scheduler"><span class="none"></span>Scheduler</a></li>
    <li><a href="../../documentation/lifecycle.html" title="Lifecycle"><span class="none"></span>Lifecycle</a></li>
    <li><a href="../../documentation/working_with_relational_dbs/jpa.html" title="Working with relational DBs"><span class="icon-chevron-right"></span>Working with relational DBs</a></li>
    <li><a href="../../documentation/using_the_cache.html" title="Using the cache"><span class="none"></span>Using the cache</a></li>
    <li><a href="../../documentation/internationalization.html" title="Internationalization"><span class="none"></span>Internationalization</a></li>
    <li><a href="../../documentation/static_assets.html" title="Static assets"><span class="none"></span>Static assets</a></li>
    <li><a href="../../documentation/sending_mail.html" title="Sending mail"><span class="none"></span>Sending mail</a></li>
    <li><a href="../../documentation/logging.html" title="Logging"><span class="none"></span>Logging</a></li>
    <li><a href="../../documentation/custom_routing.html" title="Custom routing"><span class="none"></span>Custom routing</a></li>
    <li><a href="../../documentation/servlet_bridge.html" title="Servlet bridge"><span class="none"></span>Servlet bridge</a></li>
    <li><a href="../../documentation/console.html" title="Console application"><span class="none"></span>Console application</a></li>
    <li class="active"><a href="#"><span class="icon-chevron-down"></span>Testing</a>
    <ul class="nav nav-list">
    <li><a href="../../documentation/testing_your_application/mocked_tests.html" title="Mocked tests"><span class="none"></span>Mocked tests</a></li>
    <li><a href="../../documentation/testing_your_application/ninja_test.html" title="Ninja Test"><span class="none"></span>Ninja Test</a></li>
    <li><a href="../../documentation/testing_your_application/ninja_doctester.html" title="Ninja DocTester"><span class="none"></span>Ninja DocTester</a></li>
    <li><a href="../../documentation/testing_your_application/ninja_fluentlenium_test.html" title="Ninja FluentLenium Test"><span class="none"></span>Ninja FluentLenium Test</a></li>
    <li><a href="../../documentation/testing_your_application/ninja_recycled_tester.html" title="Ninja Recycled Tester"><span class="none"></span>Ninja Recycled Tester</a></li>
    <li><a href="../../documentation/testing_your_application/advanced.html" title="Advanced"><span class="none"></span>Advanced</a></li>
    </ul>
</li>
    <li><a href="../../documentation/debugging.html" title="Debugging"><span class="none"></span>Debugging</a></li>
    <li><a href="../../documentation/security/getting_started.html" title="Security"><span class="none"></span>Security</a></li>
    <li><a href="../../documentation/deployment/getting_started.html" title="Deployment"><span class="icon-chevron-right"></span>Deployment</a></li>
    <li><a href="../../documentation/upgrade_guide.html" title="Upgrade guide"><span class="none"></span>Upgrade guide</a></li>
    <li><a href="../../apidocs/index.html" title="API docs (JavaDoc)"><span class="none"></span>API docs (JavaDoc)</a></li>
      <li class="nav-header">Ninja Modules</li>
    <li><a href="../../documentation/modules.html" title="Overview"><span class="none"></span>Overview</a></li>
      <li class="nav-header">Great community</li>
    <li><a href="https://twitter.com/ninjaframework" class="externalLink" title="@ninjaframework"><span class="none"></span>@ninjaframework</a></li>
    <li><a href="https://groups.google.com/d/forum/ninja-framework" class="externalLink" title="Mailing list"><span class="none"></span>Mailing list</a></li>
    <li><a href="https://github.com/ninjaframework/ninja" class="externalLink" title="Source code"><span class="none"></span>Source code</a></li>
    <li><a href="https://github.com/ninjaframework/ninja/issues" class="externalLink" title="Bug tracker"><span class="none"></span>Bug tracker</a></li>
    <li><a href="../../security.html" title="Security issues"><span class="none"></span>Security issues</a></li>
      <li class="nav-header">For developers</li>
    <li><a href="../../developer/changelog.html" title="Changelog"><span class="none"></span>Changelog</a></li>
    <li><a href="../../developer/roadmap.html" title="Roadmap"><span class="none"></span>Roadmap</a></li>
    <li><a href="../../developer/getting_started.html" title="How to contribute"><span class="none"></span>How to contribute</a></li>
</ul>
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="https://www.ninjaframework.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript">asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
    <div id="twitter">
    <a href="https://twitter.com/ninjaframework" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow ninjaframework</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span9" >
<h1>Testing</h1>
<p>Testing is <b>THE MOST IMPORTANT THING</b> of Ninja. We put a huge effort into making testing your apps
as simple and quick as possible. The developers of Ninja all had experiences with different web frameworks
that were really hard to test, or where tests were unreliable and slow.</p>
<p>Ninja changes that.</p>
<p>All tests of Ninja run really fast. And they are just plain old JUnit tests. No matter if you are testing against
a mock, or a full blown Ninja application. Forget about Integration tests, and Unit tests. Ninja only knows Unit tests.</p><section>
<h2><a name="Running_tests_and_integration_into_IDEs"></a>Running tests and integration into IDEs</h2>
<p>Ninja's tests are just regular Unit tests. That means you can run all tests of your applications via a simple</p>

<div class="source">
<pre class="prettyprint">
mvn test
</pre></div>

<p>But sometimes you want to run only a single test from our IDE. And that is also really simple. You do not have to setup
anything special. Simply select your test class and run them as JUnit tests. That's all.</p>
<p>All tests by default are as failsafe as possible. For example, tests that start a Ninja application select
a free port on your machine. This also allows to simply automate your builds on your Jenkins. No more complicated
test setups to make sure that testing works.</p>
<h1>Tests at your disposal</h1><hr />
<ul>

<li><code>Mocked Tests</code> - Testing parts of your application in isolation.</li>
<li><code>NinjaTest</code> - Testing a running server on HTTP level.</li>
<li><code>NinjaDocTester</code> - Ideal for documenting and testing JSON APIs.</li>
<li><code>NinjaFluentLeniumTest</code> - The best way to test HTML elements via Selenium on your Ninja application.</li>
</ul>
<h1>NinjaTestServer (Advanced topic)</h1>
<p>All integration tests are backed by the NinjaTestServer. In NinjaTest this functionality is hidden
to be a bit more user-friendly. But if you want to use all advanced features you may
want to use the NinjaTestServer directly.</p>
<p>Turns out it is not too complicated.</p>
<p>A handmade test with a running Ninja server could look like this:</p>

<div class="source">
<pre class="prettyprint">
@Test
public void showcaseBasicTest() {

    // Creating a TestServer is done like this
    NinjaTestServer ninjaTestServer = NinjaTestServer.builder().build();

    // baseUrl is something like &quot;http://localhost:5565&quot;
    String baseUrl = ninjaTestServer.getBaseUrl();

    // ... using this url you can now call endpoints, verify and test your application


    // You can also get instances that are initialized by Guice out of your testserver.
    // This is often useful if you want to assert functionality programmatically.
    // Like testing repositories and so on.
    MyRepository myRepository = ninjaTestServer.getInjector().getInstance(MyRepository.class);

    Assertions.assertThat(myRepository.getNumberOfUsers()).isEqualTo(1);

    // Don't forget to shut down that instance.
    // You may also want to put this in a @After JUnit method.
    ninjaTestServer.shutdown();
}
</pre></div>
</section><section>
<h2><a name="Overriding_properties_from_your_tests"></a>Overriding properties from your tests</h2>
<p>Overriding properties programmatically is very important.
A usecase is testcontainers.org. You can start a testcontainers postgresql
docker instance. But you have to tell Ninja about the Jdbc url.</p>
<p>The testcontainer port will be random, so you can't just put a static Jdbc url in your applcation.conf.</p>
<p>Using overrideProperties(&#x2026;) you can set properties that will override any other properties
present in Ninja's configuration.</p>

<div class="source">
<pre class="prettyprint">
public class DatabaseBaseTest {

    // Let's assume ARunningPostgresServer encapsulates a Testcontainer running
    // a Postgres instance.
    // More here: https://www.testcontainers.org/test_framework_integration/manual_lifecycle_control/
    // Once the Postgres Docker container is running Testcontainers can return as the jdbc url
    public String jdbcUrl = ARunningPostgresServer.getJdbcUrl();

    @Before
    @Override
    public void showcase_test() {
        // Now we start Ninja. 
        // Make sure we set the property. That property will then be picked up
        // by anything that gets properties from NinjaProperties like for instance Flyway and NinjaDb.
        NinjaTestServer ninjaTestServer = NinjaTestServer.builder()
            .overrideProperties(ImmutableMap.of(&quot;application.datasource.default.url&quot;, jdbcUrl))
            .build();

        // ... now you can do your tests on that Ninja instance


        // ... at the end we again shut down Ninja
        ninjaTestServer.shutdown();
    }
</pre></div>
</section><section>
<h2><a name="Overriding_Guice_bindings_from_your_tests"></a>Overriding Guice bindings from your tests</h2>

<div class="source">
<pre class="prettyprint">
@Test
public void testCase() {

    CacheRepository cacheRepositoryMock = Mockito.mock(CacheRepository.class);

    // We create a module. All bindings inside this module will later
    // override any other bindings that Ninja would setup &quot;normally&quot;.
    AbstractModule module = new AbstractModule() {
        @Override
        protected void configure() {
            bind(CacheRepository.class).toInstance(cacheRepositoryMock);
        }
    };

    NinjaTestServer ninjaTestServer = NinjaTestServer.builder()
        .overrideModule(module)
        .build();


    // CacheRepository inside our running Ninja will use cacheRepositoryMock.
    // All instances inside Ninja that inject CacheRepository will get 
    // cacheRepositoryMock.
    ///
    // We can now invoke things on - for instance - a service and verify via Mockito 
    // whether the correct methods on cacheRepositoryMock have been called.
    //
    // There are endless options to mock and test tings partially in Ninja.

    // ... at the end we again shut down Ninja
    ninjaTestServer.shutdown();
}
</pre></div></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2023
<a href="https://www.ninjaframework.org">ninjaframework</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
