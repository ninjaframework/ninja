<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at Jul 17, 2013
 | Rendered using Apache Maven Fluido Skin 1.2.2
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ninja Web Framework | Full stack web framework for Java. Fast and productive. Built on Maven - runs on servlet containers. - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido.min.js"></script>

          
                
        <?xml version="1.0" encoding="UTF-8"?>
<script type="text/javascript">var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38154034-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();</script>
          
    <meta name="Date-Revision-yyyymmdd" content="20130717" />
    <meta http-equiv="Content-Language" content="en" />
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/reyez/ninja">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 100;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../.." id="bannerLeft">
                <h2>Ninja web framework</h2>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2013-07-17</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.5.1</li>
                      
                
            
      
                            </ul>
      </div>

            <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
            
                                    <h3></h3>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="../introduction.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="../team.html" title="Team">Team</a>
            </li>
                                                                                                                                                                                                                                                                                                                                                                                                <li class="expanded">
                          <a href="../documentation/getting_started.html" title="Documentation">Documentation</a>
                    <ul>
                      <li class="none">
                          <a href="../documentation/controller.html" title="Controller">Controller</a>
            </li>
                      <li class="none">
                          <a href="../documentation/html_templating.html" title="Html templating">Html templating</a>
            </li>
                      <li class="none">
                          <a href="../documentation/static_assets.html" title="Static assets">Static assets</a>
            </li>
                      <li class="none">
                          <a href="../documentation/request_scope.html" title="Request scope">Request scope</a>
            </li>
                      <li class="none">
                          <a href="../documentation/internationalization.html" title="Internationalization">Internationalization</a>
            </li>
                      <li class="none">
            <strong>Filter</strong>
          </li>
                      <li class="none">
                          <a href="../documentation/application_configuration.html" title="Configuration">Configuration</a>
            </li>
                      <li class="none">
                          <a href="../documentation/deployment.html" title="Deployment">Deployment</a>
            </li>
                      <li class="none">
                          <a href="../documentation/injection.html" title="Injection">Injection</a>
            </li>
                      <li class="none">
                          <a href="../documentation/cache.html" title="Caching">Caching</a>
            </li>
                      <li class="none">
                          <a href="../documentation/lifecycle.html" title="Lifecycle">Lifecycle</a>
            </li>
                      <li class="none">
                          <a href="../documentation/scheduler.html" title="Scheduler">Scheduler</a>
            </li>
                      <li class="none">
                          <a href="../documentation/security_guide.html" title="Security Guide">Security Guide</a>
            </li>
                      <li class="none">
                          <a href="../documentation/debugging.html" title="Debugging">Debugging</a>
            </li>
                      <li class="none">
                          <a href="../documentation/validation.html" title="Validation">Validation</a>
            </li>
                      <li class="none">
                          <a href="../documentation/servlet_bridge.html" title="Servlet bridge">Servlet bridge</a>
            </li>
                      <li class="none">
                          <a href="../documentation/upgrading_to_current_version.html" title="Upgrading to latest">Upgrading to latest</a>
            </li>
                      <li class="none">
                          <a href="../apidocs/index.html" title="API">API</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="../documentation/modules.html" title="Modules">Modules</a>
            </li>
          </ul>
                        <h3>Get involved</h3>
                  <ul>
                  <li class="none">
                          <a href="https://twitter.com/ninjaframework" class="externalLink" title="@ninjaframework">@ninjaframework</a>
            </li>
                  <li class="none">
                          <a href="https://groups.google.com/d/forum/ninja-framework" class="externalLink" title="Mailing list">Mailing list</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/ninjaframework/ninja" class="externalLink" title="Source code">Source code</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/ninjaframework/ninja/issues" class="externalLink" title="Bug tracker">Bug tracker</a>
            </li>
                  <li class="none">
                          <a href="../security.html" title="Security issues">Security issues</a>
            </li>
          </ul>
                        <h3>Develop</h3>
                  <ul>
                  <li class="none">
                          <a href="../developer/changelog.html" title="Changelog">Changelog</a>
            </li>
                  <li class="none">
                          <a href="../developer/roadmap.html" title="Roadmap">Roadmap</a>
            </li>
                  <li class="none">
                          <a href="../developer/getting_started.html" title="How to contribute">How to contribute</a>
            </li>
          </ul>
                      
            
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="http://www.ninjaframework.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Filter</h1><p>Powerful powerful powerful. This is what filers are.</p><p>Let&rsquo;s consider a simple example. Let&rsquo;s say you want to implement authentication in your application.</p><p>First step is to annotate our method with a <code>@FilterWith</code> annotation:</p>
<pre class="prettyprint">
    @FilterWith(SecureFilter.class)
    public Result secureIndex() {    
        /// do something
    }    
</pre><p>Ninja will then execute the filter before the method <em>secureIndex</em> will be called.</p><p>The SecureFilter.class class itself looks like:</p>
<pre class="prettyprint">
    public class SecureFilter implements Filter {

        /** If a username is saved we assume the session is valid */
        public final String USERNAME = "username";

        @Override
        public Result filter(FilterChain chain, Context context) {

            // if we got no cookies we break:
            if (context.getSessionCookie() == null
                    || context.getSessionCookie().get(USERNAME) == null) {
            
            
                return Results.forbidden().html().template("/views/forbidden403.ftl.html");

            } else {
                return chain.next(context);
            }

        }
    }
</pre><p>The securefilter looks into the session and tries to get a variable called &ldquo;username&rdquo;. If it can do so
we can assume the user has been authenticated by us. The filter then simply calls the next filer in the chain (yes
there can be more than one filter - see below).</p>
<pre class="prettyprint">
    return chain.next(context);
</pre><p>However - if the variable <em>username</em> is not there we will immediately break the filter chain and will never
call the method itself. It instead will return a forbidden status code and render a forbidden view.</p>
<pre class="prettyprint">
    return Results.forbidden().html().template("/views/forbidden403.ftl.html");
</pre><h2>Chaining filters</h2><p>Filters are really powerful. And you can use more than one filter as a chain. Consider the following method:</p>
<pre class="prettyprint">
    @FilterWith({
        LoggerFilter.class, 
        TeaPotFilter.class})
    public Result teapot(Context context) {
        // do something
    }    
</pre><p>This method will first call the LoggerFilter and then the TeaPotFilter. Each of the individual methods can
break the chain or even alter the result and the context.</p>
                  </div>
            </div>
      
    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2013.
          All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
