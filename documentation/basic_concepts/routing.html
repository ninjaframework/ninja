<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/markdown/documentation/basic_concepts/routing.md at 2021-02-10
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20210210" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Ninja &#x2013; Routing</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.7.min.js"></script>
<meta name="description"
                  content="Ninja is a full stack web framework for Java.
                    Rock solid, fast and super productive."/>
            <link rel="icon" type="image/png" href="favicon.png" />

            <link href='//fonts.googleapis.com/css?family=Titillium+Web' rel='stylesheet' type='text/css'/>
            <link href='//fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'/>
            <link href='//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'/>

            <script type="text/javascript">

                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-38154034-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();

            </script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/ninjaframework/ninja">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="../../.." id="bannerLeft" title="Ninja web framework"><img src="../../ninja_logo.png"  alt="Ninja web framework"/></a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2021-02-10</li>
          <li id="projectVersion" class="pull-right">Version: 6.7.0</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Introduction</li>
    <li><a href="../../introduction.html" title="The problem we solve"><span class="none"></span>The problem we solve</a></li>
    <li><a href="../../high_level_overview.html" title="Ninja - high level overview"><span class="none"></span>Ninja - high level overview</a></li>
    <li><a href="../../team.html" title="The team"><span class="none"></span>The team</a></li>
      <li class="nav-header">Commercial support</li>
    <li><a href="../../commercial_support/philosophy.html" title="Philosophy"><span class="none"></span>Philosophy</a></li>
    <li><a href="../../commercial_support/training.html" title="Training"><span class="none"></span>Training</a></li>
    <li><a href="../../commercial_support/support_plans.html" title="Support plans"><span class="none"></span>Support plans</a></li>
    <li><a href="../../commercial_support/agile_custom_development.html" title="Custom development"><span class="none"></span>Custom development</a></li>
      <li class="nav-header">Documentation</li>
    <li><a href="../../documentation/getting_started/installing_ninja.html" title="Getting Started"><span class="icon-chevron-right"></span>Getting Started</a></li>
    <li><a href="../../documentation/basic_concepts/basic_concepts.html" title="Basic concepts"><span class="icon-chevron-down"></span>Basic concepts</a>
    <ul class="nav nav-list">
    <li><a href="../../documentation/basic_concepts/super_dev_mode.html" title="SuperDevMode"><span class="none"></span>SuperDevMode</a></li>
    <li class="active"><a href="#"><span class="none"></span>Routing</a></li>
    <li><a href="../../documentation/basic_concepts/controllers.html" title="Controllers"><span class="none"></span>Controllers</a></li>
    <li><a href="../../documentation/basic_concepts/filters.html" title="Filters"><span class="none"></span>Filters</a></li>
    <li><a href="../../documentation/basic_concepts/argument_extractors.html" title="Argument extractors"><span class="none"></span>Argument extractors</a></li>
    <li><a href="../../documentation/basic_concepts/dependency_injection.html" title="Dependency injection"><span class="none"></span>Dependency injection</a></li>
    <li><a href="../../documentation/basic_concepts/sessions.html" title="Sessions"><span class="none"></span>Sessions</a></li>
    <li><a href="../../documentation/basic_concepts/flash_scope.html" title="Flash scope"><span class="none"></span>Flash scope</a></li>
    <li><a href="../../documentation/basic_concepts/error_handling.html" title="Error handling"><span class="none"></span>Error handling</a></li>
    <li><a href="../../documentation/basic_concepts/metrics.html" title="Metrics"><span class="none"></span>Metrics</a></li>
    </ul>
</li>
    <li><a href="../../documentation/configuration_and_modes.html" title="Configuration and modes"><span class="none"></span>Configuration and modes</a></li>
    <li><a href="../../documentation/html_templating/getting_started.html" title="HTML templating"><span class="icon-chevron-right"></span>HTML templating</a></li>
    <li><a href="../../documentation/working_with_json_jsonp.html" title="Working with JSON / JSONP"><span class="none"></span>Working with JSON / JSONP</a></li>
    <li><a href="../../documentation/working_with_xml.html" title="Working with XML"><span class="none"></span>Working with XML</a></li>
      <li class="nav-header">Advanced topics</li>
    <li><a href="../../documentation/websockets.html" title="Web Sockets"><span class="none"></span>Web Sockets</a></li>
    <li><a href="../../documentation/validation.html" title="Validation"><span class="none"></span>Validation</a></li>
    <li><a href="../../documentation/content_negotiation.html" title="Content negotiation"><span class="none"></span>Content negotiation</a></li>
    <li><a href="../../documentation/uploading_files.html" title="Uploading files"><span class="none"></span>Uploading files</a></li>
    <li><a href="../../documentation/scheduler.html" title="Scheduler"><span class="none"></span>Scheduler</a></li>
    <li><a href="../../documentation/lifecycle.html" title="Lifecycle"><span class="none"></span>Lifecycle</a></li>
    <li><a href="../../documentation/working_with_relational_dbs/jpa.html" title="Working with relational DBs"><span class="icon-chevron-right"></span>Working with relational DBs</a></li>
    <li><a href="../../documentation/using_the_cache.html" title="Using the cache"><span class="none"></span>Using the cache</a></li>
    <li><a href="../../documentation/internationalization.html" title="Internationalization"><span class="none"></span>Internationalization</a></li>
    <li><a href="../../documentation/static_assets.html" title="Static assets"><span class="none"></span>Static assets</a></li>
    <li><a href="../../documentation/sending_mail.html" title="Sending mail"><span class="none"></span>Sending mail</a></li>
    <li><a href="../../documentation/logging.html" title="Logging"><span class="none"></span>Logging</a></li>
    <li><a href="../../documentation/custom_routing.html" title="Custom routing"><span class="none"></span>Custom routing</a></li>
    <li><a href="../../documentation/servlet_bridge.html" title="Servlet bridge"><span class="none"></span>Servlet bridge</a></li>
    <li><a href="../../documentation/console.html" title="Console application"><span class="none"></span>Console application</a></li>
    <li><a href="../../documentation/testing_your_application/getting_started.html" title="Testing"><span class="icon-chevron-right"></span>Testing</a></li>
    <li><a href="../../documentation/debugging.html" title="Debugging"><span class="none"></span>Debugging</a></li>
    <li><a href="../../documentation/security/getting_started.html" title="Security"><span class="none"></span>Security</a></li>
    <li><a href="../../documentation/deployment/getting_started.html" title="Deployment"><span class="icon-chevron-right"></span>Deployment</a></li>
    <li><a href="../../documentation/upgrade_guide.html" title="Upgrade guide"><span class="none"></span>Upgrade guide</a></li>
    <li><a href="../../apidocs/index.html" title="API docs (JavaDoc)"><span class="none"></span>API docs (JavaDoc)</a></li>
      <li class="nav-header">Ninja Modules</li>
    <li><a href="../../documentation/modules.html" title="Overview"><span class="none"></span>Overview</a></li>
      <li class="nav-header">Great community</li>
    <li><a href="https://twitter.com/ninjaframework" class="externalLink" title="@ninjaframework"><span class="none"></span>@ninjaframework</a></li>
    <li><a href="https://groups.google.com/d/forum/ninja-framework" class="externalLink" title="Mailing list"><span class="none"></span>Mailing list</a></li>
    <li><a href="https://github.com/ninjaframework/ninja" class="externalLink" title="Source code"><span class="none"></span>Source code</a></li>
    <li><a href="https://github.com/ninjaframework/ninja/issues" class="externalLink" title="Bug tracker"><span class="none"></span>Bug tracker</a></li>
    <li><a href="../../security.html" title="Security issues"><span class="none"></span>Security issues</a></li>
      <li class="nav-header">For developers</li>
    <li><a href="../../developer/changelog.html" title="Changelog"><span class="none"></span>Changelog</a></li>
    <li><a href="../../developer/roadmap.html" title="Roadmap"><span class="none"></span>Roadmap</a></li>
    <li><a href="../../developer/getting_started.html" title="How to contribute"><span class="none"></span>How to contribute</a></li>
</ul>
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="http://www.ninjaframework.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript">asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
    <div id="twitter">
    <a href="https://twitter.com/ninjaframework" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow ninjaframework</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span9" >
<h1>Routing</h1>
<p>Ninja features <b>one central route file</b>. We think this is important, because you immediately can see  what routes your application provides. It especially facilitates designing a nice RESTful application and API, because you have a good overview what is going on.</p>
<div class="section">
<h2><a name="Basics"></a>Basics</h2>
<p>The route file is a plain old Java file living at <tt>conf/Routes.java</tt>.</p>
<p><tt>Routes.java</tt> implements the interface <tt>ApplicationRoutes.java</tt>. This interface defines a method called <tt>public void init(Router router) {&#x2026;}</tt> which allows us to map incoming requests to controllers and their methods.</p>

<div>
<pre class="prettyprint">
public class Routes implements ApplicationRoutes {

    @Override
    public void init(Router router) {
        
        // a GET request to &quot;index&quot; will be handled by a class called
        // &quot;AppController&quot; its method &quot;index&quot;.
        router.GET().route(&quot;/index&quot;).with(AppController::index);

        ...

    }
}
</pre></div>

<p>The <tt>init(&#x2026;)</tt> method provides us with the <tt>Router</tt> and router allows us to define what happens for GET, POST, PUT, OPTIONS, HEAD and DELETE requests.</p>
<p>And if you want to route an HTTP method not yet supported by Ninja out of the box you can always use <tt>route.METHOD(&#x201c;MY_CUSTOM_HTTP_METHOD&#x201d;).route(&#x2026;)&#x2026;</tt>.</p>

<div class="alert alert-info">
Routes are matched top down. If an incoming request potentially maps to
two routes, the route defined first is executed.
</div>
</div>
<div class="section">
<h2><a name="Java_8_routing_with_lambda_expressions"></a>Java 8 routing with lambda expressions</h2>
<p>Ninja 6 introduced support for routing using Java 8 lambda expressions.  Ninja includes support for various kinds of lambda expressions including method references and anonymous lambdas.  See <a class="externalLink" href="https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html">https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html</a> for more info.</p>
<p>The class <tt>ninja.ControllerMethods</tt> defines the various interfaces that are acceptable method signatures for Java 8 lambda expressions. A controller method returns a <tt>ninja.Result</tt> and has anywhere from 0 to 12 arguments. If you need more than 12 arguments, you can fallback to Ninja&#x2019;s legacy routing strategy of Class + &#x201c;method&#x201d;.</p>
<p>The most common and recommended lambda expression is a reference to an instance method of an arbitrary type.</p>

<div>
<pre class="prettyprint">
public class Routes implements ApplicationRoutes {

    @Override
    public void init(Router router) {
        
        router.GET().route(&quot;/&quot;).with(AppController::index);

    }
}
</pre></div>

<p>You can also use a lambda expression of a reference to an instance method of a particular object.  Please note that Guice will not construct this instance and Ninja will use the one referenced instead.</p>

<div>
<pre class="prettyprint">
public class Routes implements ApplicationRoutes {

    @Override
    public void init(Router router) {
            
        AppController controller = new AppController();
        router.GET().route(&quot;/&quot;).with(controller::index);

    }
}
</pre></div>

<p>You can also use a lambda expression of an anonymously defined method.  The lambda method can take anywhere of 0 to 12 arguments.  Please note that unlike methods defined in a regular class, Java 8 does not retain parameter annotations on anonymously defined lambda expressions.  Ninja will still try to inject parameters via Guice into these methods, but it will only handle injection by type only.  So while <tt>ninja.Context</tt> can be injected be aware that <tt>@Param(&#x201c;a&#x201d;) String a</tt> cannot until a future JDK addresses this limitation. We recommend using either zero arguments or <tt>ninja.Context</tt> with anonymously defined lambdas.</p>

<div>
<pre class="prettyprint">
public class Routes implements ApplicationRoutes {

    @Override
    public void init(Router router) {
 
        router.GET().route(&quot;/&quot;).with(() -&gt; Results.redirect(&quot;/home&quot;));
        router.GET().route(&quot;/home&quot;).with((Context context) -&gt; Results.ok());

    }
}
</pre></div>
</div>
<div class="section">
<h2><a name="With_result_directly"></a>With result directly</h2>
<p>You can use a Result object to render a static page simply without any controller.</p>

<div>
<pre class="prettyprint">
public class Routes implements ApplicationRoutes {

    @Override
    public void init(Router router) {
        
        // a GET request to &quot;/&quot; will be redirect to &quot;/dashboard&quot;
        router.GET().route(&quot;/&quot;).with(() -&gt; Results.redirect(&quot;/dashboard&quot;));
        
        // show a static page
        router.GET().route(&quot;/dashboard&quot;).with(() -&gt; Results.html().template(&quot;/dashboard.html&quot;));

        ...

    }
}
</pre></div>
</div>
<div class="section">
<h2><a name="Regex_in_your_routes"></a>Regex in your routes</h2>
<p>Routes can contain arbitrary Java regular expressions. You can use these regular expressions simply by putting them into the route definition.</p>
<p>Some examples:</p>

<div>
<pre class="prettyprint">

// matches for instance &quot;/assets/00012&quot;, &quot;/assets/12334&quot;, ...
router.GET().route(&quot;/assets/\\d*&quot;).with(AssetsController::serveDigits);

// matches for instance &quot;/assets/myasset.xml&quot;, &quot;/assets/boing.txt&quot;, ...
router.GET().route(&quot;/assets/.*&quot;).with(AssetsController::serveArbitrary);

</pre></div>

<p>In the first example <tt>\\d*</tt> tells the router to match digits (defined by <tt>\\d</tt>) of arbitrary length (defined by <tt>*</tt>). In the second example <tt>.*</tt> lets the router match arbitrary characters (<tt>.</tt>) of arbitrary length (defined by <tt>*</tt>).</p>
<p>This example also shows what happens if two routes match. For instance a request to <tt>/assets/00012</tt> is matched by both route definitions. In that case the first matching route from top will be executed. In our case method <tt>serveDigits</tt>.</p>
<p>More on regular expressions: <a class="externalLink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html">http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html</a></p></div>
<div class="section">
<h2><a name="Getting_variable_URL_parts_into_your_controller_method"></a>Getting variable URL parts into your controller method</h2>
<p>A controller usually not only renders stuff, but also takes some inputs and does something with them.</p>
<p>Let&#x2019;s assume we got a request like that:</p>

<div>
<pre class="prettyprint">
GET /user/12345/my@email.com/userDashboard
</pre></div>

<p>Looks like a GET request to the userDashboard. The request seems to contain an <tt>id</tt> and an <tt>email</tt>. As application developer you want to have a convenient way to get <tt>id</tt> and <tt>email</tt> inside your controller. Ninja allows you to define and name parts of your routes via curly braces <tt>{&#x2026;}</tt>:</p>

<div>
<pre class="prettyprint">
router.GET().route(&quot;/user/{id}/{email}/userDashboard&quot;).with(ApplicationController::userDashboard);
</pre></div>

<p>We can then inject <tt>id</tt> and <tt>email</tt> into our controller via annotation <tt>@PathParam</tt>.</p>

<div>
<pre class="prettyprint">
package controllers;

@Singleton
public class AppController {

    public Result userDashboard(
            @PathParam(&quot;id&quot;) String id, 
            @PathParam(&quot;email&quot;) String email) {

        //do something with the parameters...
    }

}
</pre></div>

<div class="alert alert-info">
By default Ninja replaces curly braces with the following regex to match a 
variable part: <tt>([^/]*)</tt>. That means that variable parts match arbitrary
characters but do not span over any path separators &quot;/&quot;. If you need more control
please you'll find more in the next section.
</div>
</div>
<div class="section">
<h2><a name="Regular_expressions_in_variable_route_parts"></a>Regular expressions in variable route parts</h2>
<p>Ninja allows you to specify regular expressions that will be used to match arbitrary parts of your URL.</p>
<p>The syntax is <tt>{PRAMETER_NAME: REGEX}</tt> (with a whitespace after the &#x201c;:&#x201d;).</p>
<p>For instance a route like <tt>/assets/{fileName: .*}</tt> will match everything after <tt>/assets/</tt>. Imagine a request to <tt>/assets/css/app.css</tt>. This request will be handled by the route and accessing the path parameter <tt>fileName</tt> will return <tt>css/app.css</tt>.</p>
<p>Routes can contain multiple variable parts with regular expressions.</p>
<p>For example, for a request to <tt>/categories/1234/products/5678</tt>, where category is expected to be an integer value and product to be either integer or string value, you can define routes like that:</p>

<div>
<pre class="prettyprint">
router.GET().route(&quot;/categories/{catId: [0-9]+}/products/{productId: [0-9]+}&quot;).with(ProductController::product);
router.GET().route(&quot;/categories/{catId: [0-9]+}/products/{productName: .*}&quot;).with(ProductController::productByName);
</pre></div>

<p>The request above will be handled by the first route, and request to <tt>/categories/1234/products/mouse</tt> will be handled by the second route.</p>
<p>Values of variable parts of a route are injected into our controller (explained above) and are implicitly validated with regular expressions. So our controller for routes above would be like that (look at <tt>@PathParam</tt> argument types):</p>

<div>
<pre class="prettyprint">
package controllers;

@Singleton
public class ProductController {

    public Result product(
            @PathParam(&quot;catId&quot;) int catId, 
            @PathParam(&quot;productId&quot;) int productId) {

        // find product by id in given category 
    }

    public Result productByName(
            @PathParam(&quot;catId&quot;) int catId, 
            @PathParam(&quot;productName&quot;) String productName) {

        // find product(s) by name in given category 
    }
}
</pre></div>

<p>Note at how regular expressions in routes can be used to validate path parameters and to define fine grained routing.</p>
<p>You can use any Java compliant regular expressions for matching. Please refer to the official documentation at <a class="externalLink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html">http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html</a>.</p></div>
<div class="section">
<h2><a name="Injecting_objects_into_the_Router"></a>Injecting objects into the Router</h2>
<p>Because the Route.java is just a plain old java file we can also inject arbitrary stuff into it (via Guice).</p>
<p>A popular use case is to inject ninjaProperties. This allows us to activate / deactivate certain routes based on the environment we are in.</p>
<p>The following example shows that a setup route is not available when running in production:</p>

<div>
<pre class="prettyprint">
public class Routes implements ApplicationRoutes {
    
    @Inject
    NinjaProperties ninjaProperties;

    @Override
    public void init(Router router) {
        
        // a GET request to &quot;index&quot; will be handled by a class called
        // &quot;AppController&quot; its method &quot;index&quot;.
        router.GET().route(&quot;/index&quot;).with(AppController::index);

        ...

        // only active when not in production mode:
        if (!ninjaProperties.isProd) {
            router.GET().route(&quot;/setup&quot;).with(AppController::setup);
        }
    }
}
</pre></div>
</div>
<div class="section">
<h2><a name="Reverse_routing"></a>Reverse routing</h2>
<p>Let&#x2019;s say you want to know the final route of a class ApplicationController.class, method &#x201c;index&#x201d;. Assume that the original raw route looked like <tt>&#x201c;/&#x201d;</tt>.</p>
<p>You can get the final URL by injecting a <tt>ninja.ReverseRouter</tt> into your controller and calling various <tt>with</tt> methods to lookup the route and optionally replace path or add query string parameters.</p>

<div>
<pre class="prettyprint">
@Inject
ReverseRouter reverseRouter;

public void myMethod() {

    // will result into &quot;/&quot;
    String url = reverseRouter.with(ApplicationController::index)
        .build();
    
    // url would be &quot;/&quot;

}      
</pre></div>

<p>Now consider a more complex example. Say the original raw route contained placeholders on the following form: <tt>/user/{id}/{email}/userDashboard</tt>. You can now ask the router for the final URL and swap in path parameters in addition to adding query string parameters.</p>

<div>
<pre class="prettyprint">
@Inject
ReverseRouter reverseRouter;

public void myMethod() {

    String url = reverseRouter.with(ApplicationController::userDashboard)
        .path(&quot;id&quot;, &quot;123&quot;)
        .path(&quot;email&quot;, &quot;test@example.com&quot;)
        .query(&quot;paging_size&quot;, 100)
        .query(&quot;page&quot;, 1)
        .build();

    // url will be &quot;/user/123/test%40example.com/userDashboard?paging_size=100&amp;page=1&quot;
}      
</pre></div>

<div class="alert alert-info">
The `ninja.ReverseRouter` will validate that all path parameters were set
or will throw an `IllegalArgumentException` while building. All values are URL-escaped
by default or various `raw` methods can be used instead to directly build your
final URL.
</div>

<p>Redirecting a user to a reverse route is a common use case.  The <tt>Builder</tt> object returned by the reverse router has a handy <tt>redirect()</tt> method to build a <tt>ninja.Result</tt> that will redirect the user.</p>

<div>
<pre class="prettyprint">
@Inject
ReverseRouter reverseRouter;

public Result myMethod() {

    // will redirect to &quot;/&quot;
    return reverseRouter.with(ApplicationController::index)
        .redirect();

}      
</pre></div>
</div>
<div class="section">
<h2><a name="A_note_on_encoding_.2F_decoding"></a>A note on encoding / decoding</h2>
<p>Encoding / Decoding of URLs is not as easy as you might think it is. Ninja tries to simplify everything as much as possible, but as a user of the API you have to know what you are submitting to Ninja.</p>
<p>We recommend the following <a class="externalLink" href="http://blog.lunatech.com/2009/02/03/what-every-web-developer-must-know-about-url-encoding">excellent article from Lunatech</a> before you use encoding / decoding actively in your application.</p>
<p>Let&#x2019;s reconsider the controller method from above:</p>

<div>
<pre class="prettyprint">
package controllers;

@Singleton
public class ApplicationController {

    public Result index(
            @PathParam(&quot;id&quot;) String id, 
            @PathParam(&quot;email&quot;) String email, 
            @Param(&quot;debug&quot;) String debug) {

        //do something with the parameters...
    }

}
</pre></div>

<p>You can expect that String <b>id</b> and String <b>debug</b> are both correctly decoded values. <b>BUT</b> This assumes that you are encoding the values correctly on the client side. And encoding is different for query parameters or stuff in the path. Do not even think about using URLEncoder for encoding URLs. This is wrong.</p>
<p>Simple example that outlines some of the difficulties: Think of a route &#x201c;/user/{id}/userDashboard&#x201d;.</p>
<p>Let&#x2019;s say your <b>id</b> is &#x201c;rootuser/domain&#x201d;. If you do not encode the slash in the middle you end up with a URL like /user/rootuser/domain/userDashboard. And the this URL does not match the route because of the &#x201c;/&#x201d;.</p>
<p>Therefore you have to encode your id correctly. In that case it would be: rootuser%2Fdomain. When the user then visits /user/rootuser%2Fdomain/userDashboard the route matches and a @PathParam(&#x201c;id&#x201d;) would then be rootuser/domain as it is decoded by Ninja.</p>
<p>In principle it is really simple. But it is even simpler to mess encoding / decoding up. The article from Lunatech mentioned earlier is awesome and explains everything.</p></div>
<div class="section">
<h2><a name="JAX-RS-style_Annotated_Routes_in_Ninja_.28optional.29"></a>JAX-RS-style Annotated Routes in Ninja (optional)</h2>
<p><i>Ninja-jaxy-routes</i> allows you to register your routes using annotations similar to JAX-RS.</p>
<p>You may use the standard Ninja route registration in combination with this route builder or you may replace all your route registrations with annotations.</p>
<p><b>NOTE:</b> Your annotated controllers must be located somewhere within your application&#x2019;s configured controller package or a subpackage thereof.</p>
<div class="section">
<h3><a name="Add_the_ninja-jaxy-routes_dependency"></a>Add the ninja-jaxy-routes dependency</h3>

<div>
<div>
<pre class="source">&lt;dependency&gt;
    &lt;groupId&gt;org.ninjaframework&lt;/groupId&gt;
    &lt;artifactId&gt;ninja-jaxy-routes&lt;/artifactId&gt;
    &lt;version&gt;${ninja.version}&lt;/version&gt;
&lt;/dependency&gt;
</pre></div></div>
</div>
<div class="section">
<h3><a name="Initialize_JaxyRoutes_in_your_conf.Routes_class."></a>Initialize <tt>JaxyRoutes</tt> in your <tt>conf.Routes</tt> class.</h3>

<div>
<div>
<pre class="source">@Inject
JaxyRoutes jaxyRoutes;

@Override
public void init(Router router) {

    jaxyRoutes.init(router);
    
}
</pre></div></div>
</div>
<div class="section">
<h3><a name="Annotate_Your_Controllers"></a>Annotate Your Controllers</h3>
<p>Now you are ready to start annotating your controllers.</p>
<div class="section">
<h4><a name="Paths"></a>Paths</h4>
<p><i>Ninja-jaxy-routes</i> supports multiple <tt>@Path</tt> specs per controller method and also supports controller class inheritance.</p>
<p>The following example will register two <b>GET</b> routes <tt>/base/middle/app/get</tt> and <tt>/base/middle/app/retrieve</tt> for the same controller method.</p>

<div>
<div>
<pre class="source">@Path(&quot;/base&quot;)
class Base {
}

@Path(&quot;/middle&quot;)
class Middle extends Base {
}

@Path(&quot;/app&quot;)
class App extends Middle {

    @Path({&quot;/get&quot;, &quot;/retrieve&quot;})
    @GET
    Result get() {
        return Results.text().renderRaw(&quot;Yahoo!&quot;); 
    }        
}
</pre></div></div>

<p>If the <tt>Base</tt> and <tt>Middle</tt> parent classes had each specified multiple paths, all permutations of the complete routes would be registered too.</p></div>
<div class="section">
<h4><a name="HTTP_Methods"></a>HTTP Methods</h4>
<p>By default, all routes are assumed to be <b>GET</b> routes unless they are specifically annotated.</p>
<p>The following common HTTP method annotations are available:</p>
<ul>

<li><tt>@DELETE</tt></li>
<li><tt>@GET</tt></li>
<li><tt>@HEAD</tt></li>
<li><tt>@OPTIONS</tt></li>
<li><tt>@PATCH</tt></li>
<li><tt>@POST</tt></li>
<li><tt>@PUT</tt></li>
</ul>
<p>If the built-in methods are insufficient :</p>
<ol style="list-style-type: decimal">

<li>Set the key <tt>ninja.jaxy.custom_http_methods</tt> to <tt>true</tt> in your <tt>conf/application.conf</tt>.</li>
<li>Then implement your own custom HTTP method:
<p>@Target(ElementType.METHOD) @Retention(RetentionPolicy.RUNTIME) @HttpMethod(&#x201c;CUSTOM&#x201d;) public @interface CUSTOM { }</p></li>
</ol></div>
<div class="section">
<h4><a name="Registration_Order"></a>Registration Order</h4>
<p>Since your controllers and methods are reflectively loaded we can not expect a predictable route registration order from the JVM.</p>
<p>To compensate for this, you may specify the <tt>@Order</tt> annotation on a controller method to dictate the ordering of routes.</p>
<ol style="list-style-type: decimal">

<li>It is not necessary to specify an <tt>@Order</tt> for every method.</li>
<li>Lower numbers are registered first, higher numbers later.</li>
<li>If two methods have the same order, the registration order is determined by String comparison of the complete method address (controller+method).</li>
</ol>
<p>Here is an example of specifying an <tt>@Order</tt>.</p>

<div>
<div>
<pre class="source">@Path({&quot;/get&quot;, &quot;/retrieve&quot;})
@GET
@Order(10)
Result something() {
}
</pre></div></div>
</div>
<div class="section">
<h4><a name="Runtime_Mode_Inclusions.2FExclusions"></a>Runtime Mode Inclusions/Exclusions</h4>
<p>You may include/exclude routes based on the Ninja runtime mode.</p>
<ol style="list-style-type: decimal">

<li>If no mode annotations are specified, then the route is available in all modes.</li>
<li>You may specify multiple mode annotations on a controller method.</li>
</ol>
<ul>

<li><tt>@Dev</tt></li>
<li><tt>@Prod</tt></li>
<li><tt>@Test</tt></li>
</ul>
<p>Here is an example of specifying <tt>@Dev</tt> and <tt>@Test</tt>.</p>

<div>
<div>
<pre class="source">@Path(&quot;/diagnostics&quot;)
@GET
@Dev @Test
Result diagnostics() {
}
</pre></div></div>
</div>
<div class="section">
<h4><a name="NinjaProperties_Inclusions.2FExclusions"></a>NinjaProperties Inclusions/Exclusions</h4>
<p>It is also possible to include/exclude a route based on a NinjaProperties key.</p>
<p>If the key does not exist in your runtime config, the route is not registered.</p>

<div>
<div>
<pre class="source">@Path(&quot;/sneaky&quot;)
@GET
@Requires(&quot;sneaky.key&quot;)
Result somethingSneaky() {
}
</pre></div></div></div></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2021
<a href="http://www.ninjaframework.org">ninjaframework</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
