<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/documentation/basic_concepts/error_handling.md at 2023-12-07
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20231207" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Ninja &#x2013; Error handling</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.7.min.js"></script>
<meta name="description"
                  content="Ninja is a full stack web framework for Java.
                    Rock solid, fast and super productive."/>
            <link rel="icon" type="image/png" href="favicon.png" />

            <link href='//fonts.googleapis.com/css?family=Titillium+Web' rel='stylesheet' type='text/css'/>
            <link href='//fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'/>
            <link href='//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'/>

            <script type="text/javascript">

                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-38154034-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();

            </script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/ninjaframework/ninja">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="../../.." id="bannerLeft" title="Ninja web framework"><img src="../../ninja_logo.png"  alt="Ninja web framework"/></a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2023-12-07</li>
          <li id="projectVersion" class="pull-right">Version: 7.0.1-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Introduction</li>
    <li><a href="../../introduction.html" title="The problem we solve"><span class="none"></span>The problem we solve</a></li>
    <li><a href="../../high_level_overview.html" title="Ninja - high level overview"><span class="none"></span>Ninja - high level overview</a></li>
    <li><a href="../../team.html" title="The team"><span class="none"></span>The team</a></li>
      <li class="nav-header">Commercial support</li>
    <li><a href="../../commercial_support/philosophy.html" title="Philosophy"><span class="none"></span>Philosophy</a></li>
    <li><a href="../../commercial_support/training.html" title="Training"><span class="none"></span>Training</a></li>
    <li><a href="../../commercial_support/support_plans.html" title="Support plans"><span class="none"></span>Support plans</a></li>
    <li><a href="../../commercial_support/agile_custom_development.html" title="Custom development"><span class="none"></span>Custom development</a></li>
      <li class="nav-header">Documentation</li>
    <li><a href="../../documentation/getting_started/installing_ninja.html" title="Getting Started"><span class="icon-chevron-right"></span>Getting Started</a></li>
    <li><a href="../../documentation/basic_concepts/basic_concepts.html" title="Basic concepts"><span class="icon-chevron-down"></span>Basic concepts</a>
    <ul class="nav nav-list">
    <li><a href="../../documentation/basic_concepts/super_dev_mode.html" title="SuperDevMode"><span class="none"></span>SuperDevMode</a></li>
    <li><a href="../../documentation/basic_concepts/routing.html" title="Routing"><span class="none"></span>Routing</a></li>
    <li><a href="../../documentation/basic_concepts/controllers.html" title="Controllers"><span class="none"></span>Controllers</a></li>
    <li><a href="../../documentation/basic_concepts/filters.html" title="Filters"><span class="none"></span>Filters</a></li>
    <li><a href="../../documentation/basic_concepts/argument_extractors.html" title="Argument extractors"><span class="none"></span>Argument extractors</a></li>
    <li><a href="../../documentation/basic_concepts/dependency_injection.html" title="Dependency injection"><span class="none"></span>Dependency injection</a></li>
    <li><a href="../../documentation/basic_concepts/sessions.html" title="Sessions"><span class="none"></span>Sessions</a></li>
    <li><a href="../../documentation/basic_concepts/flash_scope.html" title="Flash scope"><span class="none"></span>Flash scope</a></li>
    <li class="active"><a href="#"><span class="none"></span>Error handling</a></li>
    <li><a href="../../documentation/basic_concepts/metrics.html" title="Metrics"><span class="none"></span>Metrics</a></li>
    </ul>
</li>
    <li><a href="../../documentation/configuration_and_modes.html" title="Configuration and modes"><span class="none"></span>Configuration and modes</a></li>
    <li><a href="../../documentation/html_templating/getting_started.html" title="HTML templating"><span class="icon-chevron-right"></span>HTML templating</a></li>
    <li><a href="../../documentation/working_with_json_jsonp.html" title="Working with JSON / JSONP"><span class="none"></span>Working with JSON / JSONP</a></li>
    <li><a href="../../documentation/working_with_xml.html" title="Working with XML"><span class="none"></span>Working with XML</a></li>
      <li class="nav-header">Advanced topics</li>
    <li><a href="../../documentation/websockets.html" title="Web Sockets"><span class="none"></span>Web Sockets</a></li>
    <li><a href="../../documentation/validation.html" title="Validation"><span class="none"></span>Validation</a></li>
    <li><a href="../../documentation/content_negotiation.html" title="Content negotiation"><span class="none"></span>Content negotiation</a></li>
    <li><a href="../../documentation/uploading_files.html" title="Uploading files"><span class="none"></span>Uploading files</a></li>
    <li><a href="../../documentation/scheduler.html" title="Scheduler"><span class="none"></span>Scheduler</a></li>
    <li><a href="../../documentation/lifecycle.html" title="Lifecycle"><span class="none"></span>Lifecycle</a></li>
    <li><a href="../../documentation/working_with_relational_dbs/jpa.html" title="Working with relational DBs"><span class="icon-chevron-right"></span>Working with relational DBs</a></li>
    <li><a href="../../documentation/using_the_cache.html" title="Using the cache"><span class="none"></span>Using the cache</a></li>
    <li><a href="../../documentation/internationalization.html" title="Internationalization"><span class="none"></span>Internationalization</a></li>
    <li><a href="../../documentation/static_assets.html" title="Static assets"><span class="none"></span>Static assets</a></li>
    <li><a href="../../documentation/sending_mail.html" title="Sending mail"><span class="none"></span>Sending mail</a></li>
    <li><a href="../../documentation/logging.html" title="Logging"><span class="none"></span>Logging</a></li>
    <li><a href="../../documentation/custom_routing.html" title="Custom routing"><span class="none"></span>Custom routing</a></li>
    <li><a href="../../documentation/servlet_bridge.html" title="Servlet bridge"><span class="none"></span>Servlet bridge</a></li>
    <li><a href="../../documentation/console.html" title="Console application"><span class="none"></span>Console application</a></li>
    <li><a href="../../documentation/testing_your_application/getting_started.html" title="Testing"><span class="icon-chevron-right"></span>Testing</a></li>
    <li><a href="../../documentation/debugging.html" title="Debugging"><span class="none"></span>Debugging</a></li>
    <li><a href="../../documentation/security/getting_started.html" title="Security"><span class="none"></span>Security</a></li>
    <li><a href="../../documentation/deployment/getting_started.html" title="Deployment"><span class="icon-chevron-right"></span>Deployment</a></li>
    <li><a href="../../documentation/upgrade_guide.html" title="Upgrade guide"><span class="none"></span>Upgrade guide</a></li>
    <li><a href="../../apidocs/index.html" title="API docs (JavaDoc)"><span class="none"></span>API docs (JavaDoc)</a></li>
      <li class="nav-header">Ninja Modules</li>
    <li><a href="../../documentation/modules.html" title="Overview"><span class="none"></span>Overview</a></li>
      <li class="nav-header">Great community</li>
    <li><a href="https://twitter.com/ninjaframework" class="externalLink" title="@ninjaframework"><span class="none"></span>@ninjaframework</a></li>
    <li><a href="https://groups.google.com/d/forum/ninja-framework" class="externalLink" title="Mailing list"><span class="none"></span>Mailing list</a></li>
    <li><a href="https://github.com/ninjaframework/ninja" class="externalLink" title="Source code"><span class="none"></span>Source code</a></li>
    <li><a href="https://github.com/ninjaframework/ninja/issues" class="externalLink" title="Bug tracker"><span class="none"></span>Bug tracker</a></li>
    <li><a href="../../security.html" title="Security issues"><span class="none"></span>Security issues</a></li>
      <li class="nav-header">For developers</li>
    <li><a href="../../developer/changelog.html" title="Changelog"><span class="none"></span>Changelog</a></li>
    <li><a href="../../developer/roadmap.html" title="Roadmap"><span class="none"></span>Roadmap</a></li>
    <li><a href="../../developer/getting_started.html" title="How to contribute"><span class="none"></span>How to contribute</a></li>
</ul>
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="https://www.ninjaframework.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript">asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
    <div id="twitter">
    <a href="https://twitter.com/ninjaframework" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow ninjaframework</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span9" >
<h1>Error handling</h1>
<p>Even the most simplistic applications have to handle errors some way or the other.
Ninja supports you by providing a default mechanism to throw exceptions and
handle them via HTML views.</p><section>
<h2><a name="Ninja.27s_exceptions"></a>Ninja's exceptions</h2>
<p>Ninja provides four types of exceptions:</p>
<ul>

<li><code>BadRequestException</code></li>
<li><code>ForbiddenRequestException</code></li>
<li><code>RequestNotFoundException</code></li>
<li><code>InternalServerErrorException</code></li>
</ul>
<p>A <code>BadRequestException</code> should signal a faulty request by the user. It is
similar in mindset as the HTTP error 400.</p>
<p>A <code>ForbiddenRequestException</code> should signal a unauthorized request by the user. It is
similar in mindset as the HTTP error 403.</p>
<p>A <code>RequestNotFoundException</code> should signal a unauthorized request by the user. It is
similar in mindset as the HTTP error 404.</p>
<p>An <code>InternalServerErrorException</code> signals that something went wrong
inside your application - pretty much like the HTTP error 500.</p>
<p>Both exceptions are unchecked, and you can wrap your own exceptions inside them.
For instance if you encounter an  <code>IOException</code> you can rethrow that exception
by calling  <code>throw new InternalServerErrorException(ioException)</code>.</p>
<p>At the very end of the request handling Ninja will detect the exception and
render an appropriate error page.</p></section><section>
<h2><a name="Errors_and_content_negotiation"></a>Errors and content negotiation</h2>
<p>The representation of the error to the user is based on content negotiation. Ninja
by default properly communicates errors in HTML, JSON and XML.</p></section><section>
<h2><a name="HTML_error_representation"></a>HTML error representation</h2>
<p>The default HTML views for errors can be found here:</p>
<ul>

<li><code>views/system/400badRequest.ftl.html</code></li>
<li><code>views/system/404notFound.ftl.html</code></li>
<li><code>views/system/403forbidden.ftl.html</code></li>
<li><code>views/system/500internalServerError.ftl.html</code></li>
<li><code>views/system/401unauthorized.ftl.html</code> (if an authorization is required)</li>
</ul>
<p>You can overwrite the views by creating the appropriate files in your application
at the very same locations (<code>views/system/&#x2026;</code>).</p>
<p>This allows you to use your own styling and messages for the error views. The rendering
context will contain a <code>Message</code> object, containing a <code>text</code> description of the error type,
and an <code>error</code> message from the corresponding exception (if any).</p>
<p>You can also change their locations using the following ninja properties:</p>
<ul>

<li><code>application.views.400badRequest</code></li>
<li><code>application.views.404notFound</code></li>
<li><code>application.views.403forbidden</code></li>
<li><code>application.views.500internalServerError</code></li>
<li><code>application.views.401unauthorized</code></li>
</ul></section><section>
<h2><a name="JSON_and_XML_error_representations"></a>JSON and XML error representations</h2>
<p>JSON and XML errors will both be rendered by content negotiation and their
default template rendering engines. Errors thus will be rendered as JSON or XML if
the user sends header Accept: application/json or Accept: application/xml.</p>
<p>The error itself based on ninja.util.Message which contains one field called &#x201c;text&#x201d;.</p>
<p>By default the JSON error as Message will look like:</p>

<div class="source">
<pre class="prettyprint">
{
    &quot;text&quot;: &quot;Oops. The requested route cannot be found.&quot;,
    &quot;error&quot;: &quot;My exception localized message.&quot;
}
</pre></div>

<p>And XML Message looks like:</p>

<div class="source">
<pre class="prettyprint">
&lt;Message&gt;
    &lt;text&gt;Oops. The requested route cannot be found.&lt;/text&gt;
    &lt;error&gt;My exception localized message.&lt;/text&gt;
&lt;/Message&gt;
</pre></div>
</section><section>
<h2><a name="Internationalization_of_errors"></a>Internationalization of errors</h2>
<p>There are basic default error messages defined. You can define your own and
translate them by adding the following keys to your
<code>conf/messages.properties</code> files:</p>
<ul>

<li>Bad request: <code>ninja.system.bad_request.text</code></li>
<li>Internal server error: <code>ninja.system.internal_server_error.text</code></li>
<li>Route not found: <code>ninja.system.not_found.text</code></li>
</ul>
<p>Keys and default values are defined in <code>ninja.NinjaConstant</code>.</p>
<p>Exception messages can also be defined as keys in your
<code>conf/messages.properties</code>, while the localized exception
message will be used if no translation exists. So for
example <code>throw new BadRequestException(&#x201c;error.invalidData&#x201d;);</code>
will result in a translation of <code>error.invalidData</code> in your error page
rendering context.</p></section><section>
<h2><a name="More"></a>More</h2>
<p>If you want to tweak Ninja's error handling even more have a look at &#x201c;custom routing&#x201d;.
That's an advanced topic and explains <code>conf.Ninja</code> and its possibilities.</p></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2023
<a href="https://www.ninjaframework.org">ninjaframework</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
